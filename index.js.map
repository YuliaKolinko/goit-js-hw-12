{"version":3,"file":"index.js","sources":["../src/js/pixabay-api.js","../src/js/render-functions.js","../src/img/icon/Group.png","../src/main.js"],"sourcesContent":["import axios from 'axios';\r\n\r\naxios.defaults.baseURL = 'https://pixabay.com/api/';\r\n\r\nlet currentPage = 1;\r\nexport async function responseData(requestWords, additionalParams = {}) {\r\n  const requestParams = {\r\n    key: '49149625-6c85390ad8fbd016bc28c7d7b',\r\n    q: requestWords,\r\n    image_type: 'photo',\r\n    orientation: 'horizontal',\r\n    safesearch: true,\r\n    per_page: 15,\r\n    page: currentPage,\r\n    ...additionalParams,\r\n  };\r\n  try {\r\n    const response = await axios.get('', { params: requestParams });\r\n    currentPage += 1;\r\n    return response.data;\r\n  } catch (error) {\r\n    console.error('Error fetching data from Pixabay API:', error);\r\n    throw error;\r\n  }\r\n}\r\n// Скидаємо значення сторінки до 1\r\nexport function resetPage() {\r\n  currentPage = 1;\r\n}\r\n","// SimpleLightbox імпорт бібліотеки\r\nimport SimpleLightbox from 'simplelightbox';\r\nimport 'simplelightbox/dist/simple-lightbox.min.css';\r\nlet lightbox = new SimpleLightbox('.gallery a', {\r\n  captions: true,\r\n  captionsData: 'alt',\r\n  captionType: 'attr',\r\n  captionDelay: 250,\r\n  animationSpeed: 350,\r\n  captionPosition: 'bottom',\r\n});\r\n\r\n// lightbox.on('show.simplelightbox', function () {});\r\n// lightbox.on('error.simplelightbox', function (e) {\r\n//   console.log(e);\r\n// });\r\n\r\n// Функція для оновлення SimpleLightbox\r\nexport function refreshLightbox() {\r\n  lightbox.refresh();\r\n}\r\nexport function renderImages(images) {\r\n  const gallery = document.querySelector('.gallery');\r\n  const galleryArray = images.map(image => {\r\n    const {\r\n      webformatURL,\r\n      largeImageURL,\r\n      likes,\r\n      views,\r\n      tags,\r\n      comments,\r\n      downloads,\r\n    } = image;\r\n    const li = document.createElement('li');\r\n    li.classList.add('gallery-item');\r\n    const link = document.createElement('a');\r\n    link.classList.add('gallery-link');\r\n    link.href = largeImageURL;\r\n    const img = document.createElement('img');\r\n    img.classList.add('gallery-image');\r\n    img.src = webformatURL;\r\n    img.alt = tags;\r\n    img.width = 360;\r\n    img.height = 200;\r\n    li.appendChild(link);\r\n    link.appendChild(img);\r\n    const infoContainer = document.createElement('div');\r\n    infoContainer.classList.add('gallery-item-info');\r\n    infoContainer.innerHTML = `\r\n  <div class=\"item-info-container\">\r\n    <span class=\"description-name\">Likes</span>\r\n    <span class=\"description-counts\">${likes}</span>\r\n  </div>\r\n  <div class=\"item-info-container\">\r\n    <span class=\"description-name\">Views</span>\r\n    <span class=\"description-counts\">${views}</span>\r\n  </div>\r\n  <div class=\"item-info-container\">\r\n    <span class=\"description-name\">Comments</span>\r\n    <span class=\"description-counts\">${comments}</span>\r\n  </div>\r\n  <div class=\"item-info-container\">\r\n    <span class=\"description-name\">Downloads</span>\r\n    <span class=\"description-counts\">${downloads}</span>\r\n  </div>\r\n`;\r\n    li.appendChild(infoContainer);\r\n    return li;\r\n  });\r\n  gallery.append(...galleryArray);\r\n}\r\nexport function clearGallery() {\r\n  const gallery = document.querySelector('.gallery');\r\n  gallery.innerHTML = '';\r\n}\r\n","export default \"data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABgAAAAYCAYAAADgdz34AAAACXBIWXMAAAsTAAALEwEAmpwYAAAAAXNSR0IArs4c6QAAAARnQU1BAACxjwv8YQUAAAEYSURBVHgBrZZRDoIwDIYrwfDqTeQo3ohxEr0BXsW77GXFOFdkYcC6DuFPCJB1/7fCWgBgZEzfIPY256BYzqfkzE8nUNbCE+DzgqSKK8W6OVBV5xYk+ZUbgw/IFMVKmfxtng3ZYy5CjjBnISlzrXUtGcZiZpDxolsGIWItvTi/OK0xAuk7GhsBRjEGioNMmffMXKNEAAeRzENACYJc8QxF5IuJNBZhS2PSfBGwhNB9rjmpgHxZ5jqprAyC3jT0mi29RwSE5v6xhO9EhAjblN0tqS38G59t02ShKeCzU2Kh+SDE9z0GAUGxGPKaLS4F2aqVudcRENb8CIhovgeSMl/VwdQWbOPOl5yPvivs25b2MWjKJOu3hTX+AgZ5PpvL0NSkAAAAAElFTkSuQmCC\"","// iziToast імпорт бібліотеки\r\nimport iziToast from 'izitoast';\r\nimport 'izitoast/dist/css/iziToast.min.css';\r\n\r\n// loaders імпорт бібліотеки\r\nimport 'loaders.css/loaders.min.css';\r\n// Імпорт функцій\r\nimport { responseData, resetPage } from './js/pixabay-api';\r\nimport {\r\n  renderImages,\r\n  clearGallery,\r\n  refreshLightbox,\r\n} from './js/render-functions';\r\n// Імпорт іконок\r\nimport iconSvgError from './img/icon/Group.png';\r\n\r\nconst form = document.querySelector('.form');\r\nconst loaderElement = document.querySelector('.loader');\r\nconst gallery = document.querySelector('.gallery');\r\nconst loadMoreBtn = document.querySelector('.load-more');\r\nconst errorMesage = {\r\n  message:\r\n    'Sorry, there are no images matching your search query.Please try again!',\r\n  messageColor: '#fff',\r\n  backgroundColor: '#ef4040',\r\n  position: 'topRight',\r\n  iconUrl: iconSvgError,\r\n};\r\nconst endOfSearch = {\r\n  message: \"We're sorry, but you've reached the end of search results.\",\r\n  messageColor: '#fff',\r\n  backgroundColor: '#ef4040',\r\n  position: 'topRight',\r\n  iconUrl: iconSvgError,\r\n};\r\n\r\nform.addEventListener('submit', searchImages);\r\nloadMoreBtn.addEventListener('click', loadMoreImages);\r\nlet totalHits = 0;\r\nlet loadedImages = 0;\r\nlet query = '';\r\n// Обробляємо подію відправки форми, та відображаємо знайдені зображення в галереї\r\nasync function searchImages(event) {\r\n  // Відміняємо дію за замовченням\r\n  event.preventDefault();\r\n  // Перевірка введеного тексту\r\n  query = event.currentTarget.elements.searchQuery.value.trim();\r\n  if (!query) {\r\n    return;\r\n  }\r\n  // Показуємо лоадер\r\n  loaderElement.classList.remove('visually-hidden');\r\n  // Очищаємо галерею\r\n  clearGallery();\r\n  // Очищаємо поле вводу\r\n  form.reset();\r\n  // Скидаємо значення сторінки до 1 при новому пошуку\r\n  resetPage();\r\n  // Виконуємо запит на сервер\r\n  loadedImages = 0;\r\n  try {\r\n    const data = await responseData(query);\r\n    const images = data.hits;\r\n    totalHits = data.totalHits; // Зберігаємо загальну кількість зображень\r\n    loadedImages = images.length; // Зберігаємо кількість завантажених зображень\r\n    if (images.length === 0) {\r\n      iziToast.show(errorMesage);\r\n      loadMoreBtn.classList.add('visually-hidden'); // Ховаємо кнопку \"Load more\" якщо більше немає зображень\r\n      return;\r\n    }\r\n    // Додаємо знайдені зображення в галерею\r\n    renderImages(data.hits);\r\n    refreshLightbox();\r\n    if (loadedImages >= totalHits) {\r\n      // Перевірка на кінець колекції\r\n      iziToast.show(endOfSearch);\r\n      loadMoreBtn.classList.add('visually-hidden');\r\n    } else {\r\n      loadMoreBtn.classList.remove('visually-hidden');\r\n    }\r\n  } catch (error) {\r\n    iziToast.show(errorMesage);\r\n  } finally {\r\n    // Ховаємо лоадер\r\n    loaderElement.classList.add('visually-hidden');\r\n  }\r\n}\r\nasync function loadMoreImages() {\r\n  loaderElement.classList.remove('visually-hidden');\r\n  const galleryHeightBefore = gallery.scrollHeight;\r\n  try {\r\n    const data = await responseData(query);\r\n    const images = data.hits;\r\n    loadedImages += images.length;\r\n    if (images.length === 0) {\r\n      iziToast.show(errorMesage);\r\n      loadMoreBtn.classList.add('visually-hidden'); // Ховаємо кнопку \"Load more\" якщо більше немає зображень\r\n      return;\r\n    }\r\n    renderImages(data.hits);\r\n    refreshLightbox();\r\n    const galleryHeightAfter = gallery.scrollHeight;\r\n    window.scrollBy({\r\n      top: galleryHeightAfter - galleryHeightBefore,\r\n      behavior: 'smooth',\r\n    }); // Прокручуємо сторінку вниз на висоту новозавантажених елементів\r\n    if (loadedImages >= totalHits) {\r\n      // Перевірка на кінець колекції\r\n      iziToast.show(endOfSearch);\r\n      loadMoreBtn.classList.add('visually-hidden');\r\n    }\r\n  } catch (error) {\r\n    iziToast.show(errorMesage);\r\n  } finally {\r\n    loaderElement.classList.add('visually-hidden');\r\n  }\r\n}\r\n"],"names":["axios","currentPage","responseData","requestWords","additionalParams","requestParams","response","error","resetPage","lightbox","SimpleLightbox","refreshLightbox","renderImages","images","gallery","galleryArray","image","webformatURL","largeImageURL","likes","views","tags","comments","downloads","li","link","img","infoContainer","clearGallery","iconSvgError","form","loaderElement","loadMoreBtn","errorMesage","endOfSearch","searchImages","loadMoreImages","totalHits","loadedImages","query","event","data","iziToast","galleryHeightBefore","galleryHeightAfter"],"mappings":"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"}